<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript几种声明和注意事项 | 雨田</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="The long road is long, only the sword is the companion">
    
    <link rel="preload" href="/assets/css/0.styles.fdb554ce.css" as="style"><link rel="preload" href="/assets/js/app.d5b4132e.js" as="script"><link rel="preload" href="/assets/js/3.0e922b40.js" as="script"><link rel="preload" href="/assets/js/1.5c2eaa1a.js" as="script"><link rel="preload" href="/assets/js/17.baf93ee4.js" as="script"><link rel="prefetch" href="/assets/js/10.11cc8502.js"><link rel="prefetch" href="/assets/js/11.7554ddd0.js"><link rel="prefetch" href="/assets/js/12.78966007.js"><link rel="prefetch" href="/assets/js/13.d45f4d92.js"><link rel="prefetch" href="/assets/js/14.f5f04ff7.js"><link rel="prefetch" href="/assets/js/15.59e35b82.js"><link rel="prefetch" href="/assets/js/16.71c756d4.js"><link rel="prefetch" href="/assets/js/18.e6712482.js"><link rel="prefetch" href="/assets/js/4.c64519db.js"><link rel="prefetch" href="/assets/js/5.17b5d7af.js"><link rel="prefetch" href="/assets/js/6.d9b466b8.js"><link rel="prefetch" href="/assets/js/7.eb7c134e.js"><link rel="prefetch" href="/assets/js/8.3b404380.js"><link rel="prefetch" href="/assets/js/9.cb95d8ed.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fdb554ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>雨田</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>The long road is long, only the sword is the companion</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">雨田</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/logo.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <!----> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>8</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>6</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>TypeScript几种声明和注意事项</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">TypeScript几种声明和注意事项</h1> <div data-v-1ff7123e><!----> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>8/19/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>TypeScript</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="声明变量"><a href="#声明变量" class="header-anchor">#</a> 声明变量</h2> <ul><li><p>未声明的变量</p> <p>变量如果在声明的时候，未指定其类型，那么它会被识别为任意值类型；</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">let</span> something<span class="token punctuation">;</span>
  something <span class="token operator">=</span> <span class="token string">'seven'</span><span class="token punctuation">;</span>
  something <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
  something<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>等价于</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">let</span> something<span class="token operator">:</span> any<span class="token punctuation">;</span>
  something <span class="token operator">=</span> <span class="token string">'seven'</span><span class="token punctuation">;</span>
  something <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

  something<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="联合类型"><a href="#联合类型" class="header-anchor">#</a> 联合类型</h2> <ul><li><p>访问联合类型的属性或方法</p> <p>当TypeScript不确定一个联合类型的变量到底是哪个类型的时候，我们只能访问此联合类型的所有类型里共有的属性或方法；</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token parameter">something<span class="token operator">:</span> string <span class="token operator">|</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span>
    <span class="token keyword">return</span> something<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// index.ts(2,22): error TS2339: Property 'length' does not exist on type 'string | number'.</span>
<span class="token comment">//   Property 'length' does not exist on type 'number'.</span>
</code></pre></div><p>上例中，length 不是 string 和 number 的共有属性，所以会报错;
访问 string 和 number 的共有属性是没问题的;</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code> <span class="token keyword">function</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token parameter">something<span class="token operator">:</span> string <span class="token operator">|</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">return</span> something<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">// index.ts(2,22): error TS2339: Property 'length' does not exist on type 'string | number'.</span>
<span class="token comment">//   Property 'length' does not exist on type 'number'.</span>
</code></pre></div><p>联合类型的变量在被赋值的时候，会根据类型推论的规则推断出一个类型：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> something<span class="token operator">:</span>string <span class="token operator">|</span> number<span class="token punctuation">;</span>
something <span class="token operator">=</span> <span class="token string">'sevne'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>somthing<span class="token punctuation">.</span>lenght<span class="token punctuation">)</span>
something <span class="token operator">=</span> <span class="token number">7</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>something<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// index.ts(5,30): error TS2339: Property 'length' does not exist on type 'number'.</span>
</code></pre></div><p>上例中，第二行的 myFavoriteNumber 被推断成了 string，访问它的 length 属性不会报错;
而第四行的 myFavoriteNumber 被推断成了 number，访问它的 length 属性时就报错了。</p></li></ul> <h2 id="对象的类型-接口"><a href="#对象的类型-接口" class="header-anchor">#</a> 对象的类型-接口</h2> <ul><li><p>任意属性</p> <p>有时候我们希望一个接口允许有任意的属性，可以使用如下方式：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span>string<span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>propName<span class="token operator">:</span>string<span class="token punctuation">]</span><span class="token operator">:</span>any<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> tom<span class="token operator">:</span>Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    gender<span class="token operator">:</span> <span class="token string">'male'</span>
  <span class="token punctuation">}</span>

</code></pre></div><p>使用 [propName: string] 定义了任意属性取 string 类型的值。
需要注意的是，一旦定义了任意属性，那么确定属性和<strong>可选属性的类型都必须是它的类型的子集</strong>：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span>string<span class="token punctuation">;</span>
  age<span class="token operator">?</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
  <span class="token punctuation">[</span>propName<span class="token operator">:</span>string<span class="token punctuation">]</span><span class="token operator">:</span>string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> tom<span class="token operator">:</span>Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>
  gender<span class="token operator">:</span> <span class="token string">'male'</span>
<span class="token punctuation">}</span>
<span class="token comment">// index.ts(3,5): error TS2411: Property 'age' of type 'number' is not assignable to string index type 'string'.</span>
<span class="token comment">// index.ts(7,5): error TS2322: Type '{ [x: string]: string | number; name: string; age: number; gender: string; }' is not assignable to type 'Person'.</span>
<span class="token comment">//   Index signatures are incompatible.</span>
<span class="token comment">//     Type 'string | number' is not assignable to type 'string'.</span>
<span class="token comment">//       Type 'number' is not assignable to type 'string'.</span>

</code></pre></div><p>上例中，任意属性的值允许是 string，但是可选属性 age 的值却是 number，number 不是 string 的子属性，所以报错了。
解决方法是使用联合类型或者any</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span>string<span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>propName<span class="token operator">:</span>string<span class="token punctuation">]</span><span class="token operator">:</span>string <span class="token operator">|</span> number<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> tom<span class="token operator">:</span>Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>
    gender<span class="token operator">:</span> <span class="token string">'male'</span>
  <span class="token punctuation">}</span>

</code></pre></div></li> <li><p>只读属性</p> <p>有时候我们希望对象中的一些字段只能在创建的时候被赋值，那么可以用 <strong>readonly</strong> 定义只读属性：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    readonly id<span class="token operator">:</span>number<span class="token punctuation">;</span>
    name<span class="token operator">:</span>string<span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>propName<span class="token operator">:</span>string<span class="token punctuation">]</span><span class="token operator">:</span>string <span class="token operator">|</span> number<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> tom<span class="token operator">:</span>Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span><span class="token number">123456</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>
    gender<span class="token operator">:</span> <span class="token string">'male'</span>
  <span class="token punctuation">}</span>
  tom<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">45678</span>
</code></pre></div><p>上例中，使用 readonly 定义的属性 id 初始化后，又被赋值了，所以报错了。
注意，只读的约束存在于第一次给对象赋值的时候，而不是第一次给只读属性赋值的时候；</p></li></ul> <h2 id="数组的类型"><a href="#数组的类型" class="header-anchor">#</a> 数组的类型</h2> <ul><li><p>在 TypeScript 中，数组类型有多种定义方式，比较灵活。</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">let</span> arr<span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">//类型 + 方括号」表示法</span>
  <span class="token keyword">let</span> arr2<span class="token operator">:</span>Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token comment">//数组范型</span>
</code></pre></div></li> <li><p>用接口表示数组</p> <p>虽然接口也可以用来描述数组，但是我们一般不会这么做，因为这种方式比前两种方式复杂多了。
不过有一种情况例外，那就是它常用来表示类数组。</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">NumnerArr</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>index<span class="token operator">:</span> number<span class="token punctuation">]</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> arr<span class="token operator">:</span> NumnerArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>NumnerArr 表示：<strong>只要索引的类型是数字时，那么值的类型必须是数字</strong>。</p></li> <li><p>类数组</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> args<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Type 'IArguments' is missing the following properties from type 'number[]': pop, push, concat, join, and 24 more.</span>
</code></pre></div><p>上例中，arguments 实际上是一个类数组，不能用普通的数组的方式来描述，而应该用接口：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> args<span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token punctuation">[</span>index<span class="token operator">:</span> number<span class="token punctuation">]</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
         length<span class="token operator">:</span> number<span class="token punctuation">;</span>
         callee<span class="token operator">:</span> Function<span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>在这个例子中，我们除了约束当索引的类型是数字时，值的类型必须是数字之外，也约束了它还有 length 和 callee 两个属性。</p></li></ul> <h2 id="函数的类型"><a href="#函数的类型" class="header-anchor">#</a> 函数的类型</h2> <ul><li><p>函数声明</p> <p>(x: number, y: number) 表示入参的类型，后面紧跟的为返回值的类型，少输入或者输入多余的参数是不被允许的;</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span> number<span class="token punctuation">,</span> y<span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>函数表达式</p> <p>=&gt; 注意不要和es6混淆这里=&gt;后面表示返回值的类型；</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">sum1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span> number<span class="token punctuation">,</span> y<span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 上面的代码只对等号右侧的匿名函数进行了类型定义，而等号左边的 mySum，是通过赋值操作进行类型推论而推断出来的。如果需要我们手动给 mySum 添加类型，则应该是这样：</span>
 <span class="token keyword">let</span> <span class="token function-variable function">sum2</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span> number<span class="token punctuation">,</span> y<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> number <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span>number<span class="token punctuation">,</span>y<span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>接口定义函数</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">MyFun</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>x<span class="token operator">:</span>number<span class="token punctuation">,</span>y<span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span>number
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> myFun<span class="token operator">:</span>MyFun<span class="token punctuation">;</span>
  myFun <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span>number<span class="token punctuation">,</span>y<span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span><span class="token parameter">number</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

</code></pre></div></li> <li><p>可选参数</p> <p>前面提到，输入多余的（或者少于要求的）参数，是不允许的。那么如何定义可选的参数呢？
与接口中的可选属性类似，我们用 ? 表示可选的参数：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">let</span> <span class="token function-variable function">sum2</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span> number<span class="token punctuation">,</span> y<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> number <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span>number<span class="token punctuation">,</span>y<span class="token operator">:</span>number<span class="token punctuation">,</span>x<span class="token operator">?</span><span class="token operator">:</span>number<span class="token operator">|</span>string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
  <span class="token punctuation">}</span>
</code></pre></div><p>需要注意的是可选参数必须接在必需参数后面。换句话说，可选参数后面不允许再出现必需参数了;</p></li> <li><p>参数默认值</p> <p>在 ES6 中，我们允许给函数的参数添加默认值，TypeScript 会将添加了默认值的参数识别为可选参数：</p></li></ul> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>   <span class="token keyword">let</span> <span class="token function-variable function">sum2</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span> number<span class="token punctuation">,</span> y<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> number <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span>number<span class="token punctuation">,</span>y<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>x<span class="token operator">?</span><span class="token operator">:</span>number<span class="token operator">|</span>string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> x <span class="token operator">+</span> y
     <span class="token punctuation">}</span>
</code></pre></div><ul><li><p>重载</p> <p>重载允许一个函数接受不同数量或类型的参数时，作出不同的处理。</p> <p>比如，我们需要实现一个函数 reverse，输入数字 123 的时候，输出反转的数字 321，输入字符串 'hello' 的时候，输出反转的字符串 'olleh'。
利用联合类型，我们可以这么实现：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span>number<span class="token operator">|</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token operator">|</span>string<span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>然而这样有一个缺点，就是不能够精确的表达，输入为数字的时候，输出也应该为数字，输入为字符串的时候，输出也应该为字符串。
这时，我们可以使用重载定义多个 reverse 的函数类型：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code> <span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span>string<span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">:</span>number<span class="token operator">|</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token operator">|</span>string<span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>上例中，我们重复定义了多次函数 reverse，前几次都是函数定义，最后一次是函数实现。在编辑器的代码提示中，可以正确的看到前两个提示。</p> <p>注意，TypeScript 会优先从最前面的函数定义开始匹配，所以多个函数定义如果有包含关系，需要优先把精确的定义写在前面。</p></li></ul> <h2 id="类型断言"><a href="#类型断言" class="header-anchor">#</a> 类型断言</h2> <ul><li><p>将一个联合类型断言为其中一个类型</p> <p>当 TypeScript 不确定一个联合类型的变量到底是哪个类型的时候，我们只能访问此联合类型的所有类型中共有的属性或方法：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Person1</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">interface</span> <span class="token class-name">Person2</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token parameter">nameParms<span class="token operator">:</span>Person1<span class="token operator">|</span>Person2</span><span class="token punctuation">)</span><span class="token operator">:</span>Boolean<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> nameParms<span class="token punctuation">.</span>getAge <span class="token operator">===</span><span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
</code></pre></div><p>上面的例子中，获取 nameParms.getAge 的时候会报错,Person2中不存在getAge；（编译报错）
此时可以使用类型断言，将 nameParms 断言成 Person1：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">Person1</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span>string<span class="token punctuation">,</span>
  <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Person2</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span>string<span class="token punctuation">,</span>
  <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token parameter">nameParms<span class="token operator">:</span>Person1<span class="token operator">|</span>Person2</span><span class="token punctuation">)</span><span class="token operator">:</span>Boolean<span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span>nameParms <span class="token keyword">as</span> Person1<span class="token punctuation">)</span><span class="token punctuation">.</span>getAge <span class="token operator">===</span><span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>这样就可以解决访问 nameParms.getAge 时报错的问题了。</p> <p>需要注意的是，类型断言只能够「欺骗」TypeScript 编译器，无法避免运行时的错误，反而滥用类型断言可能会导致运行时错误：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Person1</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span>string<span class="token punctuation">;</span>
    <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">interface</span> <span class="token class-name">Person2</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span>string<span class="token punctuation">;</span>
    <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token parameter">nameParms<span class="token operator">:</span>Person1<span class="token operator">|</span>Person2</span><span class="token punctuation">)</span><span class="token operator">:</span>any<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>nameParms <span class="token keyword">as</span> Person1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token keyword">let</span> tom<span class="token operator">:</span>Person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setName</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">666</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">getName</span><span class="token punctuation">(</span>tom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的例子编译时不会报错，但在运行时会报错：
原因为 (nameParms as Person1) 这段代码隐藏了nameParms为Person2类型的请款，将nameParms直接断言成Person1，而typescript编译器信任离我们的断言，所以编译时调用getAge()并没有报错。</p> <p>可是 getName 函数接受的参数是 Person1 | Person2 类型的变量，由于 Person2 上没有getAge方法，就会导致运行时错误了。</p> <p>总之，使用类型断言时一定要格外小心，尽量避免断言后调用方法或引用深层属性，以减少不必要的运行时错误。</p></li> <li><p>将一个父类断言为更加具体的子类</p> <p>当类之间有继承关系时，类型断言也是很常见的：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">class</span> <span class="token class-name">ApiErr</span> extend Error<span class="token punctuation">{</span>
    code<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">class</span> <span class="token class-name">HttpeErr</span> extend Error<span class="token punctuation">{</span>
    status<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">isApiErr</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token operator">:</span>Error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> ApiErr<span class="token punctuation">)</span><span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>上面的例子中，我们声明了函数 isApiError，它用来判断传入的参数是不是 ApiError 类型，为了实现这样一个函数，它的参数的类型肯定得是比较抽象的父类 Error，这样的话这个函数就能接受 Error 或它的子类作为参数了</p> <p>但是由于父类 Error 中没有 code 属性，故直接获取 error.code 会报错，需要使用类型断言获取 (error as ApiError).code</p></li></ul> <h2 id="类型别名和字符串字面量类型"><a href="#类型别名和字符串字面量类型" class="header-anchor">#</a> 类型别名和字符串字面量类型</h2> <ul><li><p>类型别名</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  type MyString <span class="token operator">=</span> string<span class="token punctuation">;</span>
  type <span class="token function-variable function">MyFun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>sting
</code></pre></div></li> <li><p>字符串字面量类型</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  type myHanel <span class="token operator">=</span> <span class="token string">'click'</span> <span class="token operator">|</span> <span class="token string">'scroll'</span> <span class="token operator">|</span> <span class="token string">'mousemove'</span><span class="token punctuation">;</span>
  <span class="token comment">//使用 type 定了一个字符串字面量类型 myHanel，它只能取三种字符串中的一种。</span>
</code></pre></div><p>注意：类型别名与字符串字面量类型都是使用 type 进行定义。</p></li></ul> <h2 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h2> <ul><li><p>简单的例子</p> <p>首先，我们来实现一个函数 createArray，它可以创建一个指定长度的数组，同时将每一项都填充一个默认值：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">createdArr</span><span class="token punctuation">(</span><span class="token parameter">length<span class="token operator">:</span>number<span class="token punctuation">,</span>value<span class="token operator">:</span>any</span><span class="token punctuation">)</span><span class="token operator">:</span>Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>length<span class="token punctuation">,</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
</code></pre></div><p>上例中，我们使用了之前提到过的数组泛型来定义返回值的类型。</p> <p>这段代码编译不会报错，但是一个显而易见的缺陷是，它并没有准确的定义返回值的类型：</p> <p>Array&lt; any &gt; 允许数组的每一项都为任意类型。但是我们预期的是，数组中每一项都应该是输入的 value 的类型。</p> <p>这时候，泛型就派上用场了：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> createdArr<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>length<span class="token operator">:</span>number<span class="token punctuation">,</span>value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span>Array<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> result<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>length<span class="token punctuation">,</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
  createdArr<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'www'</span><span class="token punctuation">)</span>
  
</code></pre></div><p>上例中，我们在函数名后添加了 &lt;T&gt;，其中 T 用来指代任意输入的类型，在后面的输入 value: T 和输出 Array&lt;T&gt; 中即可使用了。</p></li> <li><p>多个类型参数</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> swap<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>tuple<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tuple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">swap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'seven'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['seven', 7]</span>
</code></pre></div><p>上例中，我们定义了一个 swap 函数，用来交换输入的元组。</p></li> <li><p>泛型约束</p> <p>在函数内部使用泛型变量的时候，由于事先不知道它是哪种类型，所以不能随意的操作它的属性或方法：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> loggingIdentity<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>上例中，泛型 T 不一定包含属性 length，所以编译的时候报错了。</p> <p>这时，我们可以对泛型进行约束，只允许这个函数传入那些包含 length 属性的变量。这就是泛型约束：</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Params</span><span class="token punctuation">{</span>
    length<span class="token operator">:</span>number
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> getArr<span class="token operator">&lt;</span><span class="token constant">T</span> extend Params<span class="token operator">&gt;</span><span class="token punctuation">(</span>arr<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token keyword">return</span> arr
  <span class="token punctuation">}</span>

</code></pre></div><p>上例中，我们使用了 extends 约束了泛型 T 必须符合接口 Params 的形状，也就是必须包含 length 属性,此时如果调用 getArr 的时候，传入的 arg 不包含 length，那么在编译阶段就会报错了;</p></li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-70334359></ul></main> <!----></div></div></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.d5b4132e.js" defer></script><script src="/assets/js/3.0e922b40.js" defer></script><script src="/assets/js/1.5c2eaa1a.js" defer></script><script src="/assets/js/17.baf93ee4.js" defer></script>
  </body>
</html>
